<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>{% block title %}AutoStock - PDV{% endblock %}</title>
  <link rel="stylesheet" href="/static/css/style.css">
</head>
<body>
  <div class="header">
    <a href="/home/" class="btn btn-primary" style="margin-right: 16px; text-decoration: none;">Home</a>
    <button id="themeToggle" class="btn btn-secondary" style="margin-right: 16px;">🌙</button>
    <span class="header-title">AutoStock PDV</span>
    {% block header_actions %}{% endblock %}
  </div>
  <main class="main-layout">
    <aside class="sidebar" id="sidebar">
      <nav>
        <div class="menu-group">
          <span class="menu-group-title">Cadastros</span>
          <ul>
            <li><a href="/fornecedores/" class="menu-link"><span class="menu-icon">🚚</span> Fornecedores</a></li>
            <li><a href="/clientes/" class="menu-link"><span class="menu-icon">👤</span> Clientes</a></li>
            <li><a href="/categorias/" class="menu-link"><span class="menu-icon">📂</span> Categorias</a></li>
            <li><a href="/produtos/" class="menu-link"><span class="menu-icon">📦</span> Produtos</a></li>
            <li><a href="/estoque/" class="menu-link"><span class="menu-icon">🏬</span> Estoque</a></li>
            <li><a href="/precos/" class="menu-link"><span class="menu-icon">🏷️</span> Preços</a></li>
          </ul>
        </div>
        <div class="menu-group">
          <span class="menu-group-title">Operações</span>
          <ul>
              <li><a href="/carrinho/" class="menu-link"><span class="menu-icon">🛒</span> Carrinho</a></li>
              <li><a href="/orders/" class="menu-link"><span class="menu-icon">📝</span> Pedidos</a></li>
          </ul>
        </div>
      </nav>
    </aside>
    {% block content %}{% endblock %}
  </main>
  <script>
    // Highlight active menu
    document.querySelectorAll('.menu-link').forEach(link => {
      if(link.getAttribute('href') === window.location.pathname) {
        link.classList.add('active');
      }
    });
    // Theme toggle
    const themeToggle = document.getElementById('themeToggle');
    function setTheme(theme) {
      document.body.classList.remove('theme-light', 'theme-dark');
      document.body.classList.add(theme);
      localStorage.setItem('theme', theme);
      themeToggle.textContent = theme === 'theme-dark' ? '☀️' : '🌙';
    }
    themeToggle.addEventListener('click', function() {
      const current = document.body.classList.contains('theme-dark') ? 'theme-dark' : 'theme-light';
      setTheme(current === 'theme-dark' ? 'theme-light' : 'theme-dark');
    });
    // Load theme from localStorage
    setTheme(localStorage.getItem('theme') || 'theme-light');
  </script>
  {% block scripts %}{% endblock %}
</body>
</html>